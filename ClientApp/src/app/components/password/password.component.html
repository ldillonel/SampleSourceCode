<div class="col-md-6 offset-md-3 mt-5">
    <div class="card">
        <label class="card-header">Change Password</label>
        <div class="card-body">
            <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <mat-form-field>
                        <input matInput required formControlName="oldPassword" #oldPassword placeholder="Current Password" [type]="hideOldPassword ? 'password' : 'text'">
                        <mat-icon matSuffix (click)="hideOldPassword = !hideOldPassword">{{hideOldPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </mat-form-field>
                    <div *ngIf="passwordForm.controls['oldPassword'].invalid && (passwordForm.controls['oldPassword'].dirty || passwordForm.controls['oldPassword'].touched)" class="alert alert-danger">
                        <div *ngIf="passwordForm.controls['oldPassword'].errors.required">
                            Current password is required.
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <mat-form-field>
                        <input matInput required formControlName="newPassword" #password placeholder="New Password" [type]="hideNewPassword ? 'password' : 'text'" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$">
                        <mat-icon matSuffix (click)="hideNewPassword = !hideNewPassword">{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </mat-form-field>
                    <div *ngIf="passwordForm.controls['newPassword'].invalid && (passwordForm.controls['newPassword'].dirty || passwordForm.controls['newPassword'].touched)" class="alert alert-danger">
                        <div *ngIf="passwordForm.controls['newPassword'].errors.required">
                            New password is required.
                        </div>
                        <label>6 or more characters, include 1 of each:</label>
                        <label>Uppercase, lowercase, number, special character</label>
                    </div>
                </div>
                <div class="form-group">
                    <mat-form-field>
                        <input matInput required formControlName="newPassword2" #newPassword2 placeholder="Confirm New Password" [type]="hideNewPassword2 ? 'password' : 'text'" (input)="onPasswordInput()">
                        <mat-icon matSuffix (click)="hideNewPassword2 = !hideNewPassword2">{{hideNewPassword2 ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </mat-form-field>
                    <div *ngIf="passwordForm.controls['newPassword2'].invalid && (passwordForm.controls['newPassword2'].dirty || passwordForm.controls['newPassword2'].touched)" class="alert alert-danger">
                        <div *ngIf="passwordForm.controls['newPassword2'].errors.required">
                            Confirm password is required.
                        </div>
                        Password does not match.
                    </div>
                </div>
                <mat-dialog-actions class="button-right">
                    <button [disabled]="loading" mat-raised-button type="submit" class="btn btn-primary button-right">
                        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                        Change Password
                    </button>
                </mat-dialog-actions>
            </form>
        </div>
    </div>
    <div *ngIf="error" class="alert alert-danger mt-3 mb-0">Login error: {{error}}</div>
</div>